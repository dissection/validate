!function(e,t,r){function o(e){for(var t=0;t<e.length;t++)e[t].required==r&&(e[t].$required=!1,e[t].$state=!0),e[t].required?(e[t].$required=!0,e[t].$state=!1):(e[t].$required=!1,e[t].$state=!0),e[t].custom?e[t].$cerr=0:e[t].custom=!1;return e}function s(t){var r;return"boolean"==typeof t?(r=e.Deferred(),t?r.resolve():r.reject(),r.promise()):t}var i={v:"3.0.0",reg:{empty:"^\\s{0}$"}};i.create=function(e){return e.config=o(e.config),new n(e)};var n=function(e){console.log(e),this.opts=e};n.prototype.listen=function(){var t=this,r=this.opts,o=r.config;e.each(o,function(o,s){s.custom||e(s.elem).on("focus",function(){s.$state=!s.$required,r.init&&r.init(e(this)),r.notice&&r.notice(e(this),s.notice)}).on("blur",function(){new RegExp(i.reg.empty).test(e(this).val())?(s.$state=!s.$required,r.init&&r.init(e(this))):t.parsers(s,e(this).val(),0)})})},n.prototype.commit=function(t){var r=this,o=this.opts,s=o.config;e.each(s,function(t,s){var n=e(s.elem),c=n.val();s.custom?s.$state?o.success&&o.success(n):s.$cerr>-1?o.error&&o.error(n,s.error[s.$cerr].msg):e.error("请设置报错项"):new RegExp(i.reg.empty).test(c)?(s.$state=!s.$required,o.init&&o.init(n),s.$required&&o.error&&o.error(n,s.required)):r.parsers(s,n.val(),0)});for(var n=0;n<s.length;n++)if(!s[n].$state)return void(t.sbtError&&t.sbtError());t.sbtSucceed&&t.sbtSucceed()},n.prototype.parsers=function(t,r,o){var i,n=this,c=this.opts;t.error&&(i=t.error,o>i.length-1&&(t.$state=!0,c.success&&c.success(e(t.elem))),i[o]&&s(i[o].level(r)).done(function(){n.parsers(t,r,++o)}).fail(function(){t.$state&&(t.$state=!1),c.error&&c.error(e(t.elem),i[o].msg)}))},n.prototype.setState=function(t,r,o){for(var s=this.opts.config,o=o||-1,i=0;i<s.length;i++)s[i].elem==t&&(s[i].$state=r,s[i].custom?s[i].$cerr=o:e.error("指定报错项,必须是自定义列"))},n.prototype.getState=function(e,t){for(var r=this.opts.config,o=0;o<r.length;o++)if(r[o].elem==e)return r[o].$state},t.Ovd=i}(jQuery,window);